function formatCurrencyChile(e){return null==e||isNaN(e)?"0":e.toLocaleString("es-CL",{minimumFractionDigits:0,maximumFractionDigits:0})}function mostrarNotificacion(e,n="info"){const t=document.createElement("div");t.className=`alert alert-${n} alert-dismissible fade show position-fixed`,t.style.cssText="top: 20px; right: 20px; z-index: 9999; min-width: 300px;",t.innerHTML=`\n        ${e}\n        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>\n    `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.remove()},5e3)}window.webPaySimulator={processPayment:async e=>(await new Promise(e=>setTimeout(e,2e3)),{success:!0,transactionId:"WEBPAY_"+Date.now()+"_"+Math.random().toString(36).substr(2,9).toUpperCase(),amount:e.precio_total,status:"approved",timestamp:(new Date).toISOString()}),generatePaymentTicket:(e,n)=>`\n=== TICKET DE PAGO WEBPAY ===\nFecha: ${(new Date).toLocaleDateString("es-CL",{timeZone:"America/Santiago"})}\nHora: ${(new Date).toLocaleTimeString("es-CL",{timeZone:"America/Santiago"})}\n\nID Transacción: ${e.transactionId}\nEstado: ${"approved"===e.status?"APROBADO":"RECHAZADO"}\n\n=== CÓDIGO DE RESERVA ===\nCódigo: ${n.codigo_reserva||"PENDIENTE"}\n⚠️  IMPORTANTE: Guarda este código para consultar tu reserva\n\n=== DETALLES DE LA RESERVA ===\nComplejo: ${n.complejo}\nCancha: ${n.cancha}\nFecha: ${n.fecha}\nHora: ${n.hora_inicio} - ${n.hora_fin}\n\n=== DATOS DEL CLIENTE ===\nNombre: ${n.nombre_cliente}\nRUT: ${n.rut_cliente}\nEmail: ${n.email_cliente}\n\n=== MONTO ===\nTotal: $${formatCurrencyChile(n.precio_total)}\n\n=== INSTRUCCIONES ===\n1. Guarda este ticket como comprobante de pago\n2. Presenta el código de reserva al llegar al complejo\n3. Para consultas, usa el código de reserva en "Mis Reservas"\n4. El código de reserva es tu identificación principal\n\n¡Gracias por tu reserva!\n        `,downloadTicket(e,n){const t=new Blob([e],{type:"text/plain"}),a=window.URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download=`ticket_${n.fecha}_${n.hora_inicio.replace(":","")}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}};