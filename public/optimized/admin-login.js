function configurarEventListeners(){const e=document.getElementById("adminLoginForm");e&&e.addEventListener("submit",handleLogin)}async function handleLogin(e){e.preventDefault();const t=document.getElementById("email").value.trim(),n=document.getElementById("password").value;if(t&&n)try{const e=await fetch(`${API_BASE}/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}),o=await e.json();o.user,o.user,o.user,e.ok?(localStorage.setItem("adminToken",o.token),localStorage.setItem("adminUser",JSON.stringify(o.user)),localStorage.getItem("adminToken")?.substring(0,50),localStorage.getItem("adminUser"),mostrarNotificacion("¡Bienvenido al panel de administración!","success"),setTimeout(()=>{window.location.href="admin-dashboard.html"},1500)):mostrarNotificacion(o.error||"Credenciales inválidas","danger")}catch(e){console.error("Error en login:",e),mostrarNotificacion("Error de conexión. Intenta nuevamente.","danger")}else mostrarNotificacion("Por favor completa todos los campos","danger")}function mostrarNotificacion(e,t){document.querySelectorAll(".alert").forEach(e=>e.remove());const n=document.createElement("div");n.className=`alert alert-${t} alert-dismissible fade show position-fixed`,n.style.cssText="top: 20px; right: 20px; z-index: 9999; min-width: 300px;",n.innerHTML=`\n        ${e}\n        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>\n    `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},5e3)}document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("adminToken")?window.location.href="admin-dashboard.html":configurarEventListeners()});